--// Preventing Multiple Processes
pcall(function()
    getgenv().Aimbot.Functions:Exit()
end)

--// Environment
getgenv().Aimbot = {}
local Environment = getgenv().Aimbot

--// Services
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local StarterGui = game:GetService("StarterGui")
local Players = game:GetService("Players")
local Camera = game:GetService("Workspace").CurrentCamera

--// Variables
local LocalPlayer = Players.LocalPlayer
local Title = "Exunys Developer"
local FileNames = {"Aimbot", "Configuration.json", "Drawing.json"}
local Typing, Running, Animation, RequiredDistance, ServiceConnections = false, false, nil, 2000, {}

--// Script Settings
Environment.Settings = {
    SendNotifications = true,
    SaveSettings = true, -- Re-execute upon changing
    ReloadOnTeleport = true,
    Enabled = true,
    TeamCheck = false,
    AliveCheck = true,
    WallCheck = false, -- Laggy
    Sensitivity = 0, -- Animation length (in seconds) before fully locking onto target
    ThirdPerson = false, -- Uses mousemoverel instead of CFrame to support locking in third person (could be choppy)
    ThirdPersonSensitivity = 3, -- Boundary: 0.1 - 5
    TriggerKey = "MouseButton2",
    Toggle = false,
    LockPart = "Head" -- Body part to lock on
}

--// Creating Menu (GUI)

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer.PlayerGui
ScreenGui.Name = "AimbotMenu"

local MenuFrame = Instance.new("Frame")
MenuFrame.Size = UDim2.new(0, 400, 0, 300)
MenuFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
MenuFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MenuFrame.Parent = ScreenGui

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Text = "Aimbot Settings"
TitleLabel.Size = UDim2.new(1, 0, 0, 50)
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TitleLabel.TextSize = 24
TitleLabel.Parent = MenuFrame

-- Toggle Button for Aimbot
local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 380, 0, 50)
ToggleButton.Position = UDim2.new(0, 10, 0, 60)
ToggleButton.Text = "Toggle Aimbot: Off"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ToggleButton.TextSize = 18
ToggleButton.Parent = MenuFrame

ToggleButton.MouseButton1Click:Connect(function()
    Environment.Settings.Enabled = not Environment.Settings.Enabled
    if Environment.Settings.Enabled then
        ToggleButton.Text = "Toggle Aimbot: On"
    else
        ToggleButton.Text = "Toggle Aimbot: Off"
    end
end)

-- Sensitivity Slider
local SensitivityLabel = Instance.new("TextLabel")
SensitivityLabel.Size = UDim2.new(1, 0, 0, 30)
SensitivityLabel.Position = UDim2.new(0, 0, 0, 120)
SensitivityLabel.Text = "Sensitivity: " .. Environment.Settings.Sensitivity
SensitivityLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SensitivityLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
SensitivityLabel.TextSize = 18
SensitivityLabel.Parent = MenuFrame

local SensitivitySlider = Instance.new("Slider")
SensitivitySlider.Size = UDim2.new(1, -20, 0, 20)
SensitivitySlider.Position = UDim2.new(0, 10, 0, 150)
SensitivitySlider.MinValue = 0
SensitivitySlider.MaxValue = 5
SensitivitySlider.Value = Environment.Settings.Sensitivity
SensitivitySlider.Parent = MenuFrame

SensitivitySlider.Changed:Connect(function(value)
    Environment.Settings.Sensitivity = value
    SensitivityLabel.Text = "Sensitivity: " .. math.floor(value)
end)

-- FOV Slider
local FOVLabel = Instance.new("TextLabel")
FOVLabel.Size = UDim2.new(1, 0, 0, 30)
FOVLabel.Position = UDim2.new(0, 0, 0, 180)
FOVLabel.Text = "FOV: " .. Environment.FOVSettings.Amount
FOVLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FOVLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
FOVLabel.TextSize = 18
FOVLabel.Parent = MenuFrame

local FOVSlider = Instance.new("Slider")
FOVSlider.Size = UDim2.new(1, -20, 0, 20)
FOVSlider.Position = UDim2.new(0, 10, 0, 210)
FOVSlider.MinValue = 30
FOVSlider.MaxValue = 180
FOVSlider.Value = Environment.FOVSettings.Amount
FOVSlider.Parent = MenuFrame

FOVSlider.Changed:Connect(function(value)
    Environment.FOVSettings.Amount = value
    FOVLabel.Text = "FOV: " .. math.floor(value)
end)

-- Exit Button
local ExitButton = Instance.new("TextButton")
ExitButton.Size = UDim2.new(0, 380, 0, 50)
ExitButton.Position = UDim2.new(0, 10, 0, 240)
ExitButton.Text = "Exit"
ExitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExitButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
ExitButton.TextSize = 18
ExitButton.Parent = MenuFrame

ExitButton.MouseButton1Click:Connect(function()
    Environment.Functions:Exit()
end)

-- Functions for the script
function Environment.Functions:Exit()
    ScreenGui:Destroy()
    -- Add any other exit functionality here, such as saving settings, etc.
end
