--// Full Nova Selfmade UI + Working Aimbot //--

-- Services
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- Settings
local Settings = {
    AimbotEnabled = false,
    AimbotKey = Enum.KeyCode.E,
    AimPart = "Head",
    TeamCheck = true,
    FOV = 150
}

-- UI Creation
local NovaGui = Instance.new("ScreenGui", game.CoreGui)
NovaGui.Name = "NovaUI"

local MainFrame = Instance.new("Frame", NovaGui)
MainFrame.Size = UDim2.new(0, 500, 0, 300)
MainFrame.Position = UDim2.new(0.3, 0, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
MainFrame.Active = true
MainFrame.Draggable = true

local TitleBar = Instance.new("TextLabel", MainFrame)
TitleBar.Size = UDim2.new(1,0,0,40)
TitleBar.BackgroundColor3 = Color3.fromRGB(20,20,20)
TitleBar.Text = "Nova"
TitleBar.TextColor3 = Color3.fromRGB(255,255,255)
TitleBar.Font = Enum.Font.GothamBold
TitleBar.TextSize = 24

local Sidebar = Instance.new("Frame", MainFrame)
Sidebar.Size = UDim2.new(0,120,1, -40)
Sidebar.Position = UDim2.new(0,0,0,40)
Sidebar.BackgroundColor3 = Color3.fromRGB(25,25,25)

local ContentFrame = Instance.new("Frame", MainFrame)
ContentFrame.Size = UDim2.new(1, -120, 1, -40)
ContentFrame.Position = UDim2.new(0,120,0,40)
ContentFrame.BackgroundTransparency = 1

local Tabs = {"Aimbot", "CarMod", "Teleport", "Esp", "Autofarm", "Misc", "Visual"}
local TabButtons = {}
local CurrentTab = "Aimbot"

-- Dynamic YPos
local YPos = 10

local function ClearContent()
    for _,v in pairs(ContentFrame:GetChildren()) do
        v:Destroy()
    end
    YPos = 10
end

local function AddLabel(text)
    local Label = Instance.new("TextLabel", ContentFrame)
    Label.Size = UDim2.new(1,-20,0,30)
    Label.Position = UDim2.new(0,10,0,YPos)
    Label.BackgroundTransparency = 1
    Label.Text = text
    Label.TextColor3 = Color3.fromRGB(255,255,255)
    Label.Font = Enum.Font.GothamBold
    Label.TextSize = 18
    Label.TextXAlignment = Enum.TextXAlignment.Left
    YPos += 35
end

local function AddToggle(text, setting)
    local Button = Instance.new("TextButton", ContentFrame)
    Button.Size = UDim2.new(1,-20,0,30)
    Button.Position = UDim2.new(0,10,0,YPos)
    Button.BackgroundColor3 = Settings[setting] and Color3.fromRGB(0,170,255) or Color3.fromRGB(50,50,50)
    Button.Text = text
    Button.TextColor3 = Color3.fromRGB(255,255,255)
    Button.Font = Enum.Font.Gotham
    Button.TextSize = 18
    Button.TextXAlignment = Enum.TextXAlignment.Left

    Button.MouseButton1Click:Connect(function()
        Settings[setting] = not Settings[setting]
        Button.BackgroundColor3 = Settings[setting] and Color3.fromRGB(0,170,255) or Color3.fromRGB(50,50,50)
    end)

    YPos += 35
end

local function AddDropdown(text, options, setting)
    local Dropdown = Instance.new("TextButton", ContentFrame)
    Dropdown.Size = UDim2.new(1,-20,0,30)
    Dropdown.Position = UDim2.new(0,10,0,YPos)
    Dropdown.BackgroundColor3 = Color3.fromRGB(50,50,50)
    Dropdown.Text = text..": "..Settings[setting]
    Dropdown.TextColor3 = Color3.fromRGB(255,255,255)
    Dropdown.Font = Enum.Font.Gotham
    Dropdown.TextSize = 18
    Dropdown.TextXAlignment = Enum.TextXAlignment.Left

    local index = 1

    Dropdown.MouseButton1Click:Connect(function()
        index = (index % #options) + 1
        Settings[setting] = options[index]
        Dropdown.Text = text..": "..Settings[setting]
    end)

    YPos += 35
end

local function AddKeybind(text, setting)
    local KeyButton = Instance.new("TextButton", ContentFrame)
    KeyButton.Size = UDim2.new(1,-20,0,30)
    KeyButton.Position = UDim2.new(0,10,0,YPos)
    KeyButton.BackgroundColor3 = Color3.fromRGB(50,50,50)
    KeyButton.Text = text..": "..Settings[setting].Name
    KeyButton.TextColor3 = Color3.fromRGB(255,255,255)
    KeyButton.Font = Enum.Font.Gotham
    KeyButton.TextSize = 18
    KeyButton.TextXAlignment = Enum.TextXAlignment.Left

    KeyButton.MouseButton1Click:Connect(function()
        KeyButton.Text = text..": ..."
        local connection
        connection = UIS.InputBegan:Connect(function(input, gpe)
            if not gpe then
                Settings[setting] = input.KeyCode
                KeyButton.Text = text..": "..Settings[setting].Name
                connection:Disconnect()
            end
        end)
    end)

    YPos += 35
end

local function LoadAimbotTab()
    ClearContent()
    AddLabel("Aimbot Settings")
    AddToggle("Enable Aimbot", "AimbotEnabled")
    AddKeybind("Aimbot Key", "AimbotKey")
    AddDropdown("AimPart", {"Head", "Torso"}, "AimPart")
    AddToggle("Team Check", "TeamCheck")
end

local function SelectTab(tab)
    CurrentTab = tab
    if tab == "Aimbot" then
        LoadAimbotTab()
    else
        ClearContent()
        AddLabel(tab.." coming soon...")
    end
end

for i, tab in ipairs(Tabs) do
    local TabButton = Instance.new("TextButton", Sidebar)
    TabButton.Size = UDim2.new(1,0,0,30)
    TabButton.Position = UDim2.new(0,0,0,(i-1)*35)
    TabButton.BackgroundColor3 = Color3.fromRGB(30,30,30)
    TabButton.Text = tab
    TabButton.TextColor3 = Color3.fromRGB(255,255,255)
    TabButton.Font = Enum.Font.GothamBold
    TabButton.TextSize = 18

    TabButton.MouseButton1Click:Connect(function()
        SelectTab(tab)
    end)

    TabButtons[tab] = TabButton
end

SelectTab("Aimbot") -- Default Tab

--// Aimbot Funktion

local function GetClosestPlayer()
    local closest, shortestDist = nil, math.huge
    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild(Settings.AimPart) then
            if Settings.TeamCheck and plr.Team == LocalPlayer.Team then continue end
            local pos, visible = Camera:WorldToViewportPoint(plr.Character[Settings.AimPart].Position)
            if visible then
                local dist = (Vector2.new(pos.X,pos.Y) - UIS:GetMouseLocation()).Magnitude
                if dist < shortestDist and dist < Settings.FOV then
                    closest = plr
                    shortestDist = dist
                end
            end
        end
    end
    return closest
end

RunService.RenderStepped:Connect(function()
    if Settings.AimbotEnabled and UIS:IsKeyDown(Settings.AimbotKey) then
        local target = GetClosestPlayer()
        if target then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Character[Settings.AimPart].Position)
        end
    end
end)

print("[Nova] Loaded!")
